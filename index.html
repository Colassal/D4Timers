<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="description" content="See Timers For Current Diablo 4 World Events!">
	<title>Diablo 4 Event Timers</title>
	<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
	<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js"></script>
</head>

<body>
	<div id="test-div">
		<h1 id="test-h1">This is a test header1</h1>
	</div>
	<div id="timers-div">
		<h2 id="debug-timer"></h2>
		<script>
			// Need to come up with a way to determine the exact times of day 
			// Shouldnt be too hard, just 24hrs / 3 + offset (aligned to actual times) into an array then 
			// compare vs current time and then determine which interval is actual nearest
			var last_active_timer = new Date("Jan 7, 2023 15:37:25").getTime;
			var current_time_dist = new Date();
			
			let istimeractive = false;

			var x = function() {
				var now = new Date().getTime();

				var current_time_dist = last_active_timer - now;

				var timerhours = Math.floor((current_time_dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
				var timerminutes = Math.floor((current_time_dist % (1000 * 60 * 60)) / (1000 * 60));
				var timerseconds = Math.floor((current_time_dist % (1000 * 60)) / 1000);

				document.getElementById("debug-timer").innerHTML = timerhours + "h " + timerminutes + "m " + timerseconds + "s ";
			}

			if (!istimeractive){
				setInterval(x);
				istimeractive = true;
			}

			if (current_time_dist < 0){
				// TODO: PUT FUNCTION FOR SETTING A NEW TIMER AT 00s HERE
				//Temporary + 3hr function:
				last_active_timer = last_active_timer + 10800000; // add 3hrs in ms
				setInterval(x)
			}

		</script>
	</div>
	<div id="footer">
		<div id="footer-text">Diablo 4 2023 &copy; is a copyrighted property of <a href="https://diablo4.blizzard.com"
				target="_blank">Blizzard Entertainment</a> this site serves only as an unofficial tool for the game.
		</div>
		<div id="footer-sitedetails">This site was made by <a href="github.com/Colassal" target="_blank">Colassal</a> in
			2023</div>
	</div>
	<script defer src="main.js" type="module"></script>
</body>

</html>
